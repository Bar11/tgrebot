<h1 align="center">
  <br>Telegram 关键词自动回复机器人<br>
</h1>

### 基本命令
- 输入`/help` 获取命令集
- `/add `为当前群组或用户，添加关键词回复规则 `/add 关键词===回复内容` 或者 `/add 关键词1||关键词2===回复内容` 
```text
格式要求:
    /add 关键字===回复内容
    /add 关键字1||关键字2===回复内容
例如:
    /add 机场===https://jiji.cool
就会添加一条规则, 关键词是机场, 回复内容是网址
```
- `/addForAll`为所有群组或好友，添加关键词回复规则 `/addForAll 关键词===回复内容` 或者 `/addForAll 关键词1||关键词2===回复内容`
```text
权限要求:超级管理员
格式要求:
    /addForAll 关键字===回复内容
    /addForAll 关键字1||关键字2===回复内容
例如
    /addForAll 机场===https://jiji.cool
    就会为所有群组和好友添加一条规则, 关键词是机场, 回复内容是网址
```
- 关键词可以使用正则表达式,例如`/add re:p([a-z]+)ch===测试正则`,就会匹配规则`p([a-z]+)ch`  
```text
没测试
```
- `/del`为当前群组或用户，删除关键词规则 `/del 关键词` 暂不支持一次性删除多个关键词
```text
格式要求:
    /del 关键字
例如:
    /del 机场
    就会删除一条规则,机器人不再回复机场关键词
```
- `/sensitive`为所有群组或好友，添加敏感词禁言规则
```text
权限要求：超级管理员
格式要求：
    /sensitive 关键字===封禁时间（-1为永久封禁，单位秒）
    /sensitive 关键字1||关键字2===封禁时间（-1为永久封禁，单位秒）
或者：
    /sensitive 关键字（永久封禁） 
    /sensitive 关键字1||关键字2（永久封禁）
```
- `delete`自动删除含有关键词的文字消息, 只需要将回复内容设置成 `delete`, 并给机器人添加删除消息权限
```text
    相当于敏感词匹配，只删除消息，不禁言（这个命令我没测试）
    与`/sensitive 关键字===0`功能完全一致
```
- 为当前群组复制规则 `/copy group-id` 
```text
权限要求:超级管理员
    获取group-id的方法：
    在需要复制的群组或好友窗口下输入/list命令
格式要求:
    /copy grup-id
例如:
    /copy 1234567890
    就会复制ID为：1234567890的群组或好友下的所有规则，到当前群组
```
- 为所有群组或好友，删除关键词规则 `/delForAll 关键词===回复内容`暂不支持一次性删除多个关键词
```text
权限要求:超级管理员
格式要求:
    /delForAll 关键字
例如:
    /delForAll 机场
    就会删除所有群组和好友下的这一条规则,机器人所有群组和好友不再回复机场关键词\r\n\r\n"
```
- 使用`/list`命令可以查看本群`group-id`和所有自动回复规则
- 给机器人添加删除消息和踢人的管理权限,可以自动防清真(阿拉伯语)

### 回复特殊内容
- 回复内容支持文字\图片\GIF\视频,默认文字
- 如需图片,回复内容设置成photo:`https://t.me/c/1472018167/53095`，`https://t.me/c/1472018167/53095`是已经发送过的图片获取到的链接
- 同理,gif将`photo`替换成`gif`,视频替换成`video`,文件替换成`file`
- 注意: 这里的链接必须是公开群组的,否则无法发出来
```text
        以上功能,`photo`、`gif`、`video`测试有效
        `file`使用url连接有问题（可能是file URL 的问题。）。
```
-新增文字\图片\GIF\视频等文件的本地存储功能。

## 启动

```shell
./tgbot start --config=./conf/config.yaml
```

## License

MIT zu1k i@zu1k.com

不提供任何机器人相关的咨询或其他服务，不要私聊我

该项目基于 @zu1k 的关键词自动回复机器人



#### 一、机器人功能：
- 关键词回复规则

- 封禁用户
```text
    可以直接admin封禁，也可以机器人通过关键词自动封
```
- 消息管理
```text
    聊天消息直接都扔到数据库了
```

#### 二、管理平台功能：
- 永久保存/展示群所有的聊天记录
```text
    聊天消息直接都扔到数据库了。
    展示要怎么个展示法？
```

- 管理员所有关键词回复规则修改及增加
```text
/add 命令直接覆盖原有的规则即修改。
```
- 管理员封禁的用户
```text
  1.reply要封禁的用户所发的消息"kick",用于永久封禁用户
  2.reply要解封的用户所发的消息"unkick",用于解封用户
  ps:由于更新了v5版本的api，目前没有直接从group移除成员的方法，封禁所有权限是目前比较好的处理方式。
```
- 管理员关键词封禁规则
```text
 机器人通过关键词自动封;
 关键词由amdin或超级管理员，用/sensitive 命令设置。
```
